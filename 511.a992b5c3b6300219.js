"use strict";(self.webpackChunkarbitrage=self.webpackChunkarbitrage||[]).push([[511],{6511:(w,c,n)=>{n.r(c),n.d(c,{UsersModule:()=>y});var m=n(6814),d=n(974),u=n(9862),i=n(3360),e=n(9468),a=n(95),g=n(553);let h=(()=>{class o{constructor(t){this.http=t,this.apiUrl=g.N.apiUrl}getUsers(){return this.http.get(`${this.apiUrl}/users/all`)}addUser(t){return this.http.post(`${this.apiUrl}/users/registre`,t,{reportProgress:!0,observe:"events"})}updateUser(t,r){return this.http.put(`${this.apiUrl}/users/${r}`,t,{reportProgress:!0,observe:"events"})}confirmUser(t,r){return this.http.put(`${this.apiUrl}/users/confirm/${r}`,t,{reportProgress:!0,observe:"events"})}deleteUser(t){return this.http.delete(`${this.apiUrl}/users/${t}`)}getOne(t){return this.http.get(`${this.apiUrl}/users/getone/${t}`)}static#e=this.\u0275fac=function(r){return new(r||o)(e.LFG(u.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const Z=["buttonEl"];let b=(()=>{class o{constructor(t,r,s,l){this.fb=t,this.userService=r,this.router=s,this.root=l,this.selectedState=null,this.dropdownItems=["Maitre douvrage","Concepteur","Contractant","Fournisseur"],this.initpage={title:"Ajouter Utilisateur",button:"Ajouter"},this.selectedRole="Maitre douvrage",this.uploadedFiles=[],this.userForm=this.initForm(),this.root.params.subscribe(_=>{this.idUserToUpdate=_.id})}ngOnInit(){this.idUserToUpdate&&this.userService.getOne(this.idUserToUpdate).subscribe(t=>{this.userForm=this.updateForm(t)})}onSubmit(){let t=this.userForm.getRawValue();console.log(t);let r=new FormData;r.append("contrat",this.selectedFile),r.append("avatar",this.avatar),r.append("user",JSON.stringify(t)),console.log(r),this.idUserToUpdate?this.userService.updateUser(r,this.idUserToUpdate).subscribe(s=>{if(s.type===u.dt.UploadProgress){const l=Math.round(100*s.loaded/s.total);console.log(`File is ${l}% uploaded.`)}else s instanceof u.Zn&&console.log("File is completely uploaded!");this.router.navigateByUrl("/dashboard/users")}):this.userService.addUser(r).subscribe(s=>{if(s.type===u.dt.UploadProgress){const l=Math.round(100*s.loaded/s.total);console.log(`File is ${l}% uploaded.`)}else s instanceof u.Zn&&console.log("File is completely uploaded!");this.router.navigateByUrl("/dashboard/users")})}onUpload(t){this.selectedFile=t.files[0]}deleteFile(){this.selectedFile=null}selectAvatar(t){this.avatar=t.files[0],console.log(this.avatar)}onImageMouseOver(t){this.buttonEl.toArray().forEach(r=>{r.nativeElement.id===t.name&&(r.nativeElement.style.display="flex")})}onImageMouseLeave(t){this.buttonEl.toArray().forEach(r=>{r.nativeElement.id===t.name&&(r.nativeElement.style.display="none")})}removeImage(t,r){t.stopPropagation(),this.avatar=null}initForm(){return this.initpage={title:"Ajouter Utilisateur",button:"Ajouter"},this.fb.group({first_name:["",i.kI.required],last_name:["",i.kI.required],username:["",i.kI.required],email:["",[i.kI.required]],password:["",i.kI.required],confirmPassword:["",i.kI.required],adress:["",i.kI.required],mobile:["",i.kI.required],fax:["",i.kI.required],fixe:["",i.kI.required],metier:["",i.kI.required],role:["",i.kI.required],contrat:["",i.kI.required]})}updateForm(t){return this.initpage={title:"Modifier Utilisateur",button:"Modifier"},this.avatar=t.avatar,this.fb.group({first_name:[t.first_name,i.kI.required],last_name:[t.last_name,i.kI.required],username:[t.username,i.kI.required],email:[t.email,[i.kI.required]],password:[t.password],confirmPassword:[t.confirmPassword],adress:[t.adress,i.kI.required],mobile:[t.mobile,i.kI.required],fax:[t.fax,i.kI.required],fixe:[t.fixe,i.kI.required],metier:[t.metier,i.kI.required],role:[t.role,i.kI.required],contrat:[t.contrat]})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(a.qu),e.Y36(h),e.Y36(d.F0),e.Y36(d.gz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add"]],viewQuery:function(r,s){if(1&r&&e.Gf(Z,5),2&r){let l;e.iGM(l=e.CRH())&&(s.buttonEl=l)}},decls:59,vars:1,consts:[[2,"margin","2% 0"],[1,"card-body"],["action","javascript:void(0);",1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-6"],["for","nom",1,"form-label"],["type","text","id","nom","placeholder","Entrer votre nom ","formControlName","first_name",1,"form-control"],["for","prenom",1,"form-label"],["type","text","id","prenom","placeholder","Entrer votre pr\xe9nom","formControlName","last_name",1,"form-control"],["for","inputEmail4",1,"form-label"],["type","email","id","inputEmail4","placeholder","Email","formControlName","email",1,"form-control"],["for","inputusername",1,"form-label"],["type","text","id","inputusername","placeholder","username","formControlName","username",1,"form-control"],["for","inputPassword4",1,"form-label"],["type","password","id","inputPassword4","placeholder","Password","formControlName","password",1,"form-control"],["for","inputPassword5",1,"form-label"],["type","password","id","inputPassword5","placeholder","Confirmer votre mot de passe","formControlName","confirmPassword",1,"form-control"],[1,"col-12"],["for","inputAddress",1,"form-label"],["type","text","id","inputAddress","placeholder","1234 Main St","formControlName","adress",1,"form-control"],[1,"mb-3"],["for","phonenumberInput",1,"form-label"],["type","tel","placeholder","+216 73 554 411","formControlName","fixe","id","phonenumberInput",1,"form-control"],["type","tel","placeholder","+216 99 554 411","formControlName","mobile","id","phonenumberInput1",1,"form-control"],[1,"col-md-4"],["for","inputState",1,"form-label"],["id","inputState","data-choices","","data-choices-sorting","true","formControlName","role",1,"form-select"],["value","","selected",""],["value","arbitre"],["value","visiteur"],["value","admin"],[1,"text-end"],["type","submit",1,"btn","btn-primary"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Ajouter Utilisateur"),e.qZA()(),e.TgZ(3,"div",1)(4,"form",2),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(5,"div",3)(6,"label",4),e._uU(7,"Nom"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",3)(10,"label",6),e._uU(11,"Pr\xe9nom"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"div",3)(14,"label",8),e._uU(15,"Email"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",3)(18,"label",10),e._uU(19,"username"),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",3)(22,"label",12),e._uU(23,"Mot de passe"),e.qZA(),e._UZ(24,"input",13),e.qZA(),e.TgZ(25,"div",3)(26,"label",14),e._uU(27,"Confirmer votre mot de passe"),e.qZA(),e._UZ(28,"input",15),e.qZA(),e.TgZ(29,"div",16)(30,"label",17),e._uU(31,"Address"),e.qZA(),e._UZ(32,"input",18),e.qZA(),e.TgZ(33,"div",3)(34,"div",19)(35,"label",20),e._uU(36,"T\xe9l\xe9phone fixe"),e.qZA(),e._UZ(37,"input",21),e.qZA()(),e.TgZ(38,"div",3)(39,"div",19)(40,"label",20),e._uU(41,"Mobile"),e.qZA(),e._UZ(42,"input",22),e.qZA()(),e.TgZ(43,"div",23)(44,"label",24),e._uU(45,"Role"),e.qZA(),e.TgZ(46,"select",25)(47,"option",26),e._uU(48,"Choose..."),e.qZA(),e.TgZ(49,"option",27),e._uU(50,"Arbitre"),e.qZA(),e.TgZ(51,"option",28),e._uU(52,"Visiteur"),e.qZA(),e.TgZ(53,"option",29),e._uU(54,"Admin"),e.qZA()()(),e.TgZ(55,"div",16)(56,"div",30)(57,"button",31),e._uU(58,"Ajouter"),e.qZA()()()()()),2&r&&(e.xp6(4),e.Q6J("formGroup",s.userForm))},dependencies:[a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u]})}return o})();var p=n(7978);function v(o,f){1&o&&(e.TgZ(0,"ul",38)(1,"li")(2,"a",39),e._UZ(3,"i",40),e._uU(4," View"),e.qZA()(),e.TgZ(5,"li")(6,"a",41),e._UZ(7,"i",42),e._uU(8," Edit"),e.qZA()(),e.TgZ(9,"li")(10,"a",43),e._UZ(11,"i",44),e._uU(12," Remove"),e.qZA()()())}function U(o,f){if(1&o&&(e.TgZ(0,"tr",23)(1,"td")(2,"div",8),e._UZ(3,"input",24)(4,"label",25),e.qZA()(),e.TgZ(5,"td",26)(6,"a",27),e._uU(7,"#TB01"),e.qZA()(),e.TgZ(8,"td",28)(9,"div",29)(10,"div")(11,"h6",30)(12,"a",31),e._uU(13),e.qZA()()()()(),e.TgZ(14,"td",32),e._uU(15),e.qZA(),e.TgZ(16,"td",33),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"td")(20,"div",34)(21,"button",35),e._UZ(22,"i",36),e.qZA(),e.YNc(23,v,13,0,"ul",37),e.qZA()()()),2&o){const t=f.$implicit;e.MGl("id","p_",t._id,""),e.xp6(3),e.s9C("value",t._id),e.xp6(10),e.AsE("",t.first_name," ",t.last_name,""),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.Oqu(e.lcZ(18,6,null==t?null:t.createdAt))}}const A=[{path:"add",component:b},{path:"",component:(()=>{class o{constructor(t){this.userService=t,this.users=[]}ngOnInit(){this.userService.getUsers().subscribe(t=>{console.log(t),this.users=t})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(h))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-liste"]],decls:33,vars:2,consts:[[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input"],["for","checkAll",1,"form-check-label"],["productsortable","adherant",1,"sort","cursor-pointer"],["productsortable","co_adherant",1,"sort","cursor-pointer"],["productsortable","date",1,"sort","cursor-pointer"],[1,"list","form-check-all"],[3,"id",4,"ngFor","ngForOf"],[1,"noresult",3,"ngClass"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"mb-0"],[1,"text-reset","products"],[1,"category"],[1,"published"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn"],[1,"ph-trash","align-middle","me-1"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),e._uU(4,"Liste des Demandes"),e.qZA()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th")(11,"div",8),e._UZ(12,"input",9)(13,"label",10),e.qZA()(),e.TgZ(14,"th",11),e._uU(15,"Nom & pr\xe9nom"),e.qZA(),e.TgZ(16,"th",12),e._uU(17,"R\xf4le"),e.qZA(),e.TgZ(18,"th",13),e._uU(19,"date"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Action"),e.qZA()()(),e.TgZ(22,"tbody",14),e.YNc(23,U,24,8,"tr",15),e.qZA()()(),e.TgZ(24,"div",16)(25,"div",17)(26,"div",18)(27,"div",19),e._UZ(28,"i",20),e.qZA()(),e.TgZ(29,"h5",21),e._uU(30,"Aucune R\xe9sultat Trouver"),e.qZA(),e.TgZ(31,"p",22),e._uU(32,"Des donn\xe9es sera affich\xe9, d\xe9s que seront disponibles."),e.qZA()()()()()),2&r&&(e.xp6(23),e.Q6J("ngForOf",s.users),e.xp6(1),e.Q6J("ngClass",0!=s.users.length?"d-none":""))},dependencies:[m.mk,m.sg,d.rH,p.Hz,p.Mq,p.TO,m.uU]})}return o})()}];let q=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#r=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(A),d.Bz]})}return o})();var T=n(2296);let y=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#r=this.\u0275inj=e.cJS({imports:[m.ez,q,a.UX,a.u5,T.ot,p.mr]})}return o})()}}]);